/* ==UserStyle==
@name           No_Header_Discord_Pub
@namespace      noheaderdiscordpub
@version        5.3.0
@updateURL      https://userstyles.world/api/style/21588.user.css
@description    Remove the ad tabs and the top layout on Discord.
@author         Atlantis
@license        CC0-1.0
@preprocessor   stylus

@var checkbox only-inbox     "Only inbox in search bar üì•Ô∏é" 0
@var checkbox hide-sponso    "Clean also Nitro/Sponsors in textarea  üéÅÔ∏é‚ùñ " 0

==/UserStyle== */
@-moz-document domain("discord.com") {

    /*-----BAR-HIDE-START------*/

    /*Redifine Layout grid - hide header*/
    .visual-refresh [class*="base"] {
        /*grid-template-rows: ... --custom-app-top-bar-height ...*/
        --custom-app-top-bar-height : 0px;
    }
    /* hide top bar elements without changing space (Optimise compatibility with others transparency) */
    .visual-refresh [class*="base"] > [class*="bar"] > *:not([class*="trailing"]) {
        visibility: hidden;
    }

    /* Only inbox in "traling" */
    .visual-refresh [class*="trailing"] > div:not([data-jump-section="global"]),
    .visual-refresh [class*="trailing"] > a {
        display: none;
    }
    /*Replace Inbox*/
    .visual-refresh [class*="trailing"] {
        top: 24px;
        z-index: 500;
    }

    /*Change space for Inbox */
    .visual-refresh div[class*="upperContainer"] {
        margin-right: 43px;
    }

    /* OVERRIDE CSS RULE => MOD menu open => Clean space */
    .visual-refresh div[class*="threadSidebarOpen"] div[class*="upperContainer"] {
        margin-right: initial !important;
    }

    /*MOD menu, notice above inbox*/
    .visual-refresh [class*="guildSidebar"],
    .visual-refresh div[class*="bar"] + div[class*="notice"] {
        z-index: 600;
    }

    /*Margin top left Serv Lists*/
    .visual-refresh [class*="sidebar"] > [class*="guilds"] {
        margin-top: 10px;
    }
    /*-----BAR-HIDE-END------*/


    /*---Optional---------*/

    /* ADD boutons and spaces in search bar */
    /* NEED :has() */
    if (only-inbox != 1) {
        /* Show other bouton when only-inbox is off */
        .visual-refresh [class*="bar"]:has(> div) [class*="trailing"] > div[class*="button"][class*="iconWrapper"]:not([data-jump-section="global"]) {
            display: flex !important;
        }
        /*ADD Space for Event bouton in search bar IF the bouton exist*/
        .visual-refresh [class*="bar"]:has([class*="trailing"] > div[class*="button"][class*="iconWrapper"]:not([data-jump-section="global"])) + [class*="content"] div[class*="upperContainer"] {
            margin-right: 90px;
        }
    }

    /* Clean text area */
    if (hide-sponso) {
        /*Nitro Gift popup textarea üéÅÔ∏é*/
        div[class*="textArea"] + [class*="buttons"] > div:not(.expression-picker-chat-input-button):first-child {
            display: none;
        }
        /*Hide App/Sponsors ‚ùñ*/
        .app-launcher-entrypoint[class*="buttonContainer"] {
            display: none;
        }
    }

    /*END-Optional---------*/

}
